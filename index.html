<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>âš½ Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
    body { font-family: "Tajawal", sans-serif; transition: background 0.4s, color 0.4s; min-height: 100vh; }

    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
    body.dark { background: linear-gradient(135deg, #0d1117, #1c1f26); color: #fff; }
    body.light { background: linear-gradient(135deg, #f8f9fa, #e9ecef); color: #212529; }

    /* Navbar */
    .navbar { backdrop-filter: blur(10px); transition: background 0.3s, box-shadow 0.3s; border-bottom: 1px solid #2d333b; }
    body.dark .navbar { background: rgba(22, 27, 34, 0.95); }
    body.light .navbar { background: rgba(255, 255, 255, 0.9); border-color: #ddd; }
    .navbar.scrolled { box-shadow: 0 4px 20px rgba(0,0,0,0.25); }
    .navbar-brand { font-weight: 700; font-size: 1.3rem; letter-spacing: 1px; }
    body.dark .navbar-brand { color: #00e676 !important; }
    body.light .navbar-brand { color: #28a745 !important; }

    /* Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ */
    .mode-toggle { border: none; background: transparent; font-size: 1.4rem; cursor: pointer; transition: transform 0.3s; }
    .mode-toggle:hover { transform: rotate(20deg); }

    /* Ø§Ù„Ø¨Ø­Ø« */
    .search-container { position: sticky; top: 75px; z-index: 10; }
    .search-box { border-radius: 12px; padding: 10px 14px; transition: 0.3s; }
    body.dark .search-box { background: rgba(13,17,23,0.7); border: 1px solid #2d333b; color: #fff; }
    body.light .search-box { background: #fff; border: 1px solid #ccc; color: #000; }
    .search-box:focus { outline: none; border-color: #00e676; box-shadow: 0 0 8px rgba(0,230,118,0.5); }

    /* ÙƒØ±ÙˆØª */
    .card { border-radius: 16px; transition: all 0.3s ease-in-out; border: 1px solid transparent; opacity: 0; transform: translateY(20px); animation: fadeInUp 0.6s forwards; }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
    body.dark .card { background: rgba(22,27,34,0.85); border-color: #2d333b; box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
    body.light .card { background: rgba(255,255,255,0.9); border-color: #ddd; box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
    .card:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 8px 30px rgba(0,230,118,0.3); }

    .crest { height: 38px; margin-inline: 5px; }
    @media(max-width: 576px){ .crest{ height:28px; } }

    /* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
    h4 { font-weight: bold; border-right: 4px solid #00e676; padding-right: 10px; }
    body.light h4 { color: #28a745; border-color: #28a745; }
    body.dark h4 { color: #00e676; border-color: #00e676; }

    /* Ø§Ù„Ù†ØªÙŠØ¬Ø© */
    .score { font-weight: bold; font-size: 1.1rem; }
    .win { color: #28a745; }
    .lose { color: #dc3545; }
    .draw { color: #6c757d; }

    /* Ø±Ø³Ø§Ù„Ø© Ù„Ø§ Ù†ØªØ§Ø¦Ø¬ */
    .no-results { display: none; text-align: center; margin-top: 20px; font-size: 1.2rem; color: #dc3545; }
  </style>
</head>
<body class="dark">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand" href="/">âš½ Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</a>
      <div class="d-flex ms-auto align-items-center">
        <form method="get" class="me-3">
          <select name="competition" class="form-select bg-dark text-light border-0" onchange="this.form.submit()">
            {% for code, name in competitions.items() %}
              <option value="{{ code }}" {% if current_comp == code %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
          </select>
        </form>
        <button class="mode-toggle" id="modeToggle">ğŸŒ™</button>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <!-- Ø¨Ø­Ø« -->
    <div class="search-container">
      <input type="text" id="search" class="form-control search-box mb-4" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ÙØ±ÙŠÙ‚ ...">
    </div>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª -->
    {% for matchday, matches in matches_by_day.items() %}
      <h4 class="mt-4 mb-3">ğŸ“… Ø§Ù„Ø¬ÙˆÙ„Ø© {{ matchday }}</h4>
      <div class="row">
        {% for m in matches %}
        <div class="col-md-6 mb-3 match-card">
          <div class="card p-3 shadow-sm">
            <div class="d-flex justify-content-between align-items-center">
              <div class="text-start">
                <img src="{{ m.homeCrest }}" class="crest"> <strong>{{ m.homeTeam }}</strong>
              </div>
              <span class="text-muted fw-bold">VS</span>
              <div class="text-end">
                <img src="{{ m.awayCrest }}" class="crest"> <strong>{{ m.awayTeam }}</strong>
              </div>
            </div>
            <hr class="my-2">
            <div class="d-flex justify-content-between align-items-center">
              <span>{{ m.date }}</span>
              <span class="status">
                {% if m.status == "SCHEDULED" %}
                  <span class="badge bg-secondary">â³ Ù…Ø¬Ø¯ÙˆÙ„Ø©</span>
                {% elif m.status == "FINISHED" %}
                  <span class="badge bg-success">âœ… Ø§Ù†ØªÙ‡Øª</span>
                {% elif m.status == "IN_PLAY" %}
                  <span class="badge bg-danger">ğŸ”¥ Ù…Ø¨Ø§Ø´Ø±Ø©</span>
                {% else %}
                  {{ m.status }}
                {% endif %}
              </span>
              <span class="score">
                {% if m.score_home is not none %}
                  {% if m.score_home > m.score_away %}
                    <span class="win">{{ m.score_home }}</span> - <span class="lose">{{ m.score_away }}</span>
                  {% elif m.score_home < m.score_away %}
                    <span class="lose">{{ m.score_home }}</span> - <span class="win">{{ m.score_away }}</span>
                  {% else %}
                    <span class="draw">{{ m.score_home }} - {{ m.score_away }}</span>
                  {% endif %}
                {% else %}
                  ğŸ•’ Ù„Ù… ØªØ¨Ø¯Ø£
                {% endif %}
              </span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% endfor %}
    <div class="no-results">âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©</div>
  </div>

  <script>
    // Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ÙØ±ÙŠÙ‚
    document.getElementById("search").addEventListener("keyup", function() {
      let query = this.value.toLowerCase();
      let found = false;
      document.querySelectorAll(".match-card").forEach(function(card) {
        let text = card.innerText.toLowerCase();
        if (text.includes(query)) {
          card.style.display = "block";
          found = true;
        } else {
          card.style.display = "none";
        }
      });
      document.querySelector(".no-results").style.display = found ? "none" : "block";
    });

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Dark/Light Ù…Ø¹ ØªØ®Ø²ÙŠÙ†
    const toggleBtn = document.getElementById("modeToggle");
    const body = document.body;
    if (localStorage.getItem("theme") === "light") {
      body.classList.remove("dark"); body.classList.add("light"); toggleBtn.textContent = "â˜€ï¸";
    }
    toggleBtn.addEventListener("click", () => {
      if (body.classList.contains("dark")) {
        body.classList.replace("dark", "light"); toggleBtn.textContent = "â˜€ï¸"; localStorage.setItem("theme", "light");
      } else {
        body.classList.replace("light", "dark"); toggleBtn.textContent = "ğŸŒ™"; localStorage.setItem("theme", "dark");
      }
    });

    // Ø¥Ø¶Ø§ÙØ© Ø¸Ù„ Ù„Ù„Ù€ Navbar Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
    window.addEventListener("scroll", () => {
      document.querySelector(".navbar").classList.toggle("scrolled", window.scrollY > 50);
    });
  </script>
</body>
</html>